\section{Kombinatorische Regeln und Zählstrategien}
\subsubsection{Summenregel}
Falls $(A_i)_{i=1 \dots n}$ paarweise disjunkt $(i \neq j \implies A_i \cap A_j = \varnothing )$ dann \\
\[ \abs{\bigcup_{i=1}^n A_i} = \sum_{i=1}^n \abs{A_i} \]

\subsubsection{Produktregel}
\begin{gather*}
	(A_i)_{i=1 \dots n} \\
	\abs{\bigtimes_{i=1}^n A_i} = \prod_{i=1}^n \abs{A_i}
\end{gather*}

\subsubsection{Gleichheitsregel}
$S, T$ endlich, $\exists f: S \rightarrow T$ bijektiv $\implies \abs{S} = \abs{T}$

\subsubsection{Inklusion-Exklusion}
\begin{gather*}
	\abs{A_1 \cup A_2} = \abs{A_1} + \abs{A_2} - \abs{A_1 \cap A_2} \\
	\begin{split}
		\abs{A_1 \cup A_2 \cup A_3}
			&= \abs{A_1} + \abs{A_2} + \abs{A_3} \\
			&- \abs{A_1 \cap A_2} - \abs{A_1 \cap A_3} - \abs{A_2 \cap A_3} \\
			&+ \abs{A_1 + A_2 + A_3}
	\end{split}
	\intertext{$n$ Mengen:}
	\begin{split}
		\abs{A_1 \cup \dotsb \cup A_n}
			&= \bas{A_1} + \dotsb + \abs{A_n} \\
			&- \abs{A_1 \cap A_2} - \dotsb - \abs{A_{n-1} \cap A_n} \\
			&\vdots \\
			&+ (-1)^{n+1} \cdot \abs{A_1 \cap \dotsb \cap A_n}
	\end{split}\\
	\abs{\bigcup_{i=1}^n A_i} = \sum_{r=1}^n (-1)^{r-1} \sum_{1 \leq i_1 < i_2 < \dots < i_r \leq n} \abs{\bigcap_{j=1}^r A_{ij}} \\
	\abs{\bigcup_{i=1}^n A_i} = \sum_{k=1}^n (-1)^{k-1} \sum_{\substack{\text{alle } I \subseteq \{1,\dotsc,n\}\\\text{mit } \abs{I} = k}} \abs{\bigcap_{i \in I}^r A_{ij}} \\
\end{gather*}
\begin{bew}[note = Induktion über $n$]
	\begin{description}
		\item[IV)] $n=1 , n=2 \:\checkmark$
		\item[IS)] $n \rightarrow n+1$ \\
			\begin{align*}
				\abs{\bigcup_{i=1}^{n+1} A_i}
					&= \abs{(\bigcup_{i=1}^n A_i) \cup A_{n+1}} \\
					&= \abs{\bigcup_{i=1}^n A_i} + \abs{A_{n+1}} - \abs{(\bigcup_{i=1}^n A_i) \cap A_{n+1}} \\
					&= \underbrace{\sum_{r=1}^n (-1)^{r-1} \sum_{\substack{r\text{-Familien}\\a \leq i_j \leq n}} \abs{\bigcap_{j=1}^r A_{ij}}}_{r\text{-Familien ohne } A_{n+1}} + \underbrace{\abs{A_{n+1}}}_{1\text{-Familie } A_{n+1}} \\
					&\underbrace{ - \sum_{r=1}^n (-1)^{r-1} \sum_{r\text{-Familien}} \abs{\bigcap (A_i \cap A_n)}}_{+ \underbrace{\sum_{r=1}^n (-1)^{(r+1)-1} \sum_{r\text{-Familien}} \abs{\bigcap (A_i \cap A_n)}}_{(r+1) \text{ Familien mit } A_{n+1}}}
			\end{align*}
	\end{description}
\end{bew}
\subsubsection{Anwendungen}
Fixpunktfreie Permutationen\\
\[
\begin{pmatrix}
	1	& 2	& 3	\\
	2	& 3	& 1
\end{pmatrix} \qquad \begin{pmatrix}
	1	& 2	& 3	\\
	3	& 2	& 1
\end{pmatrix} \qquad
\begin{pmatrix}
	1	& 2	& \dots	& i	& i+1	& \dots	\\
	*	& *	& \dots	& i	& *	& \dots	
\end{pmatrix}
\]
Wie viele der $n!$ Permutationen einer $n$-Menge sind fixpunkte? \\
\begin{gather*}
	A_i \coloneqq \{ \text{Permutationen von } [n] \coloneqq \{1, 2, \dots, n \} \text{ mit Fixpunkt } i \} \\
	\begin{split}
	\text{\# Permutationen mit Fixpunkt}
		&= \abs{\bigcup_{i=1}^n A_i} \underset{\mathrm{I.-E.}}{=} \sum_{k=1}^n (-1)^{k-1} \sum_{\substack{I \subseteq \{1, \dotsc , n\}\\\abs{I} = k}} \underbrace{\abs{\bigcap A_{ij}}}_{(n-k)!} \\
		&= \sum_{k=1}^n (-1)^{k-1} \frac{n!}{k!} = n! - \frac{n!}{2!} + \frac{n!}{3!} - \frac{n!}{4!} + \dotsb
	\end{split} \\
	\begin{split}
	\text{\# fixpunktfreie } &= \frac{n!}{2!} -\frac{n!}{3!} +\frac{n!}{4!} \mp \dotsb \\
	&= n! ( 1 - \frac{1}{1!} +\frac{1}{2!} - \frac{1}{3!} + \frac{1}{4!} \mp \dots + (-1)^n \frac{1}{n!} ) \\
	&= n! ( 1 + \frac{(-1)}{1!} +\frac{(-1)^2}{2!} + \frac{(-1)^3}{3!} + \frac{(-1)^4}{4!} + \dots + \frac{(-1)^n}{n!} ) \\
	&\rightarrow \frac{1}{e}
	\end{split} \\
	e^x = 1 + \frac{x}{1!} +\frac{x^2}{2!} +\frac{x^3}{3!} + \dotsb
\end{gather*}

$\varphi(n) \coloneqq \abs{\{k \in \{0 , \dotsc , n-1 \} , ggT(k,n) = 1 \}}$ \\
Eulersche $\varphi$-Funktion.\\
\begin{bsp*}
	\begin{gather*}
		\begin{split}
			p,q \text{ prim}, p \neq q, \varphi(p \cdot q) &= p \cdot q  - q - p + 1 \\
			&= (p-1)(q-1) \\
			&= \varphi(p) \cdot \varphi(q) \quad \text{nur wenn $p,q$ prim!}
		\end{split} \\
		\text{Allgemein: } n = \prod_{i=1}^r {p_i}^{l_i} , l_i > 0 \text{ Primfaktorzerlegung} \\
		A_i = \{ \text{ durch $p_i$ teilbare Zahlen $0, \dotsc , n-1$} \} \\
		\abs{\bigcup_{i=1}^n A_i} = \sum_{r=1}^n (-1)^{r-1} \sum_{1 \leq i_1 < i_2 < \dots < i_r \leq n} \underbrace{\abs{\bigcap_{j=1}^r A_{ij}}}_{\substack{\text{Zahlen $0 \dots n-1$ geteilt von } \\p_{i_1} , p_{i_2} , \dotsc , p_{i_k} \\\implies \frac{n}{p_{i_1} \cdot p_{i_2} \cdot \dotsm \cdot p_{i_k}}}} \\
		\begin{split}
			\implies \varphi(n) &= n ( 1 - \sum_{k=1}^r (-1)^{k-1} \frac{1}{p_{i_1} \cdot p_{i_2} \cdot \dotsm \cdot p_{i_k}} ) \\
			&= n ( 1 + \sum_{p_{i_1} , \dotsc , p_{i_k}} (-\frac{1}{p_{i_1}}) \cdot (-\frac{1}{p_{i_2}}) \cdot \dotsm \cdot (-\frac{1}{p_{i_k}}) ) \\
			&= n \cdot (1-\frac{1}{p_{i_1}}) \cdot (1-\frac{1}{p_{i_2}}) \cdot \dotsm \cdot (1-\frac{1}{p_{i_k}})
		\end{split} \\
		\text{Also: } \varphi(n) = \prod_i {p_i}^{l_i} \cdot \prod_i \underbrace{(1- \frac{1}{p_i})}_{\frac{p_i-1}{p_i}}
	\end{gather*}
\end{bsp*}

\subsubsection{Diricheltsches Schubfachprinzip (DSFP)}
\begin{satz*}
	Wenn $n$ Objekte auf $k<n$ Schubfächer verteilt werden dann enthält mind. ein Schubfach mind. 2 Objekte.
	\begin{bew}
		Induktion über $k$ \\
		Verankerung: $k=1 \:\checkmark$ \\
		Schritt: $k \rightarrow k+1$: Falls höchstens ein Objekt im Schubfach 1: $n-1$ oder $n$ Objekte auf $k-1$ Schubfächer 
	\end{bew}
\end{satz*}
\begin{bsp*}
	$(1,17,5,3,20,2,4)$\\
	\begin{tabular}{ l l }
		monoton aufsteigende Teilfolge\index{Teilfolge!monoton aufsteigend}:	&$(1,5,20)$ \\
		monoton absteigende Teilfolge\index{Teilfolge!monoton absteigend}:	&$(17,4,3,2)$
	\end{tabular}\\
	Frage: Für eine Folge der Länge $n$, gibt es  eine untere Grenze für die Länge  der längsten \textbf{monoton} Teilfolge? \\
	Antwort: $\approx \sqrt{n}$\\
	Präzis: Eine Folge (unterschiedlicher Zahlen) der Länge $m^2 + 1$ hat eine monotone Teilfolge der Länge $m+1 \approx \sqrt{n}$
	\begin{bew}
		Indirekt: Annahme: Längste monotone Teilfolge hat Länge $\leq m$\\
		\[
			\begin{array}{ c c c c c c }
				a_1			& a_2				&a_3				& \dots	& a_{n-1}			& a_n		\\
				(\dots , \dots  )	& (\dots , \dots  )	& (\dots , \dots  )	& \dots	& (\dots , \dots  )	& (1,1)
			\end{array}
		\]
		(Länge der längsten aufsteigenden Teilfolge die mit $a_i$ beginnt, Länge der längsten absteigenden Teilfolge die mit $a_i$ beginnt)\\
		Einträge in $(\dots , \dots  ) : 1 \leq \dots \leq m$ \\
		Anzahl verschiedene $(\dots , \dots  ) \leq m^2$ \\
		DSFP: Zwei Paare müssen gleich sein: \\
		\[\begin{array}{ c c c c c }
			\dots		& a_i		& \dots	& a_j 		& \dots 	\\
					& (c,d)	&		& (c,d)	&		
		\end{array}\]
		\begin{tabular}{ l l }
			1. Fall:	& $a_i < a_j$ : aufsteigende Folge von $a_i$ der Länge $c+1 \:\lightning$ \\
			2. Fall:	& analog für $a_i > a_j$
		\end{tabular}
	\end{bew}
\end{bsp*}
\todo{Acronym: ref to the real stuff}

\subsubsection{Doppeltes Abzählen}
\[ \sum_{a \in A} m_a = \sum_{n \in B} n_b = \abs{S} \]
\begin{bsp*}
	\[\nu(n) \coloneqq \abs{\{ k> 0 : k \mid n \}} \]\\
	Frage: Was ist der Mittelwert von $\nu(k)$ für $k=1, \dotsc , n$ ? \\
	\[ \sum_{k=1}^n \nu(k) = \sum_{k=1}^n \mu(k) = \sum_{k=1}^n \left\lfloor \frac{n}{k} \right\rfloor \]
	''Jede $k$-te Zahl ist durch $k$ teilbar.'' \\
	Wie gross ist das als Funktion von $n$? \\
	\begin{gather*}
		\sum_{k=1}^n \frac{n}{k} - n = \sum_{k=1}^n (\frac{n}{k} - 1) \leq \sum_{k=1}^n \left\lfloor \frac{n}{k} \right\rfloor \leq \sum_{k=1}^n \frac{n}{k} \\
		\left(\sum_{k=1}^n \frac{1}{k}\right) -1 \leq \underbrace{\frac{1}{n} \sum_{k=1}^n \left\lfloor \frac{n}{k} \right\rfloor}_{\frac{1}{n} \sum_{k=1}^n \mu(k)} \leq \sum_{k=1}^n  \frac{1}{k} \\
		\sum_{k=1}^n  \frac{1}{k} \geq \int_0^n \frac{1}{x+1} \:\mathrm{d}x = \ln(n+1) \geq \ln(x) \\
		\sum_{k=1}^n  \frac{1}{k} \leq \int_1^n \frac{1}{x} \:\mathrm{d}x+1 = \ln(n) +1
	\end{gather*}
\end{bsp*}
