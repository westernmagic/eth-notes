\PassOptionsToPackage{log-functions=false}{expl3}
\RequirePackage{expl3}
\ProvidesExplPackage{wmpkgloader}{2016/09/19}{}{Resolve package interdependencies}
\PassOptionsToPackage{log-declarations=false}{xparse}

%TODO: find a way without this
\RequirePackage{silence}
\WarningFilter{latex}{You have requested package}
\WarningFilter{latex}{You have requested document class}

%TODO: pass options to package
\RequirePackage[recommended=false]{pkgloader}

%TODO: implement module identification with date comparision of source packageâ€”use fileinfo
%TODO: implement a \DependsOn macro that essentially is \Load {A} before {B} if {B}
% list of all the modules
\clist_set:Nn \l_tmpa_clist {
	algorithm,
	algorithmic,
	amsmath,
	amstext,
	atbegshi,
	atenddvi,
	attachfile2,
	backref,
	bidi,
	bigintcalc,
	bitset,
	breqn,
	ccicons,
	changes,
	chemfig,
	chemgreek,
	chemmacros,
	chessfss,
	cnltx-base,
	colortbl,
	count1to,
	csquotes,
	datatool-base,
	datetime2-calc,
	datetime2,
	delarray,
	egplot,
	ellipsis,
	embedfile,
	epstopdf-base,
	epstopdf,
	eso-pic,
	etexcmds,
	etextools,
	etoolbox,
	extract,
	fnbreak,
	fontspec-luatex,
	fontspec-xetex,
	fontspec,
	gauss,
	geometry,
	gincltex,
	glossaries,
	graphics,
	graphicx,
	grfext,
	grffile,
	grfpaste,
	hobsub-hyperref,
	hologo,
	hopatch,
	hycolor,
	hyperref,
	idxlayout,
	ifsym,
	ifthenx,
	kvdefinekeys,
	kvoptions-patch,
	kvoptions,
	kvsetkeys,
	l2tabu,
	l3flag,
	l3keys2e,
	l3regex,
	l3str-convert,
	l3tl-analysis,
	l3tl-build,
	listings,
	lscape,
	ltabptch,
	lualatex-math,
	luatexbase,
	mathtools,
	maybemath,
	mdframed,
	media9,
	metalogo,
	mfirstuc,
	mhchem,
	microtype,
	mleftright,
	morewrites,
	mychemistry,
	nameref,
	nowidow,
	ocgbase,
	pdfbase,
	pdfcolmk,
	pdfcomment,
	pdfescape,
	pdflscape,
	pdfpages,
	pdftexcmds,
	pgf,
	pgfcalendar,
	pgfcore,
	pgffor,
	pgfmath,
	pgfopts,
	pgfplots,
	pgfrcs,
	pgfsys,
	physics,
	polyglossia,
	primargs,
	realscripts,
	refcount,
	rerunfilecheck,
	scrbase,
	scrkbase,
	scrlayer-scrpage,
	scrlayer,
	siunitx,
	skak,
	soulpos,
	soulutf8,
	stringenc,
	tabu,
	tabularx,
	tikz,
	todonotes,
	translations,
	translator,
	unicode-math-luatex,
	unicode-math,
	uniquecounter,
	varindex,
	wm,
	wml3,
	wmmath,
	wmnotes,
	wmpatch,
	wmref,
	wmtext,
	wmtheorem,
	wmversion,
	xcolor-patch,
	xcolor,
	xifthen,
	xltxtra,
	xparse,
	xpatch,
	xr-hyper,
	xunicode,
	zref-abspage,
	zref-base,
	zref-savepos,
	zref-user,
	zref
}

% load them
\clist_map_inline:Nn \l_tmpa_clist {
	%TODO: normalize catcodes before and after
	\input{pkgloader/pkgloader-#1.sty}
}

% clean up after ourselves
\clist_clear:N \l_tmpa_clist
